<!DOCTYPE html>
<html lang="ko"
	  xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="layouts/nolayout">
<th:block layout:fragment="html">
	<div class="contentRoot">
		<div class="content-header">
            <h2>서비스 모델 관리</h2>
    		<div class="button-group">
    			<!--등록-->
    			<button id="insert-dialog-btn" class="mdc-button mdc-button--outlined mdc-ripple-upgraded">
    				<span class="mdc-button__ripple"></span>
    				<i class="material-icons mdc-button__icon me-1">add</i>
    				<span class="mdc-button__label">등록</span>
    			</button>
    		</div>
		</div>
		
		<div class="content-body">
		    <div class="card">
		        <div class="card-header">
		            <div class="form-row md-size">
		                <!-- << 서비스모델명 검색 -->
                        <div class="mdc-text-field text-field mdc-text-field--outlined flex-ratio-two search-bar">
                            <input type="text" class="mdc-text-field__input"
                                    aria-describedby="text-field-outlined-shape-one-helper-text"
                                    v-model="searchCondition.serviceModelName"/>
                            <div class="mdc-notched-outline mdc-notched-outline--upgraded">
                                <div class="mdc-notched-outline__leading"></div>
                                <div class="mdc-notched-outline__notch">
                                    <label class="mdc-floating-label">서비스모델명</label>
                                </div>
                                <div class="mdc-notched-outline__trailing"></div>
                            </div>
                        </div>
                		<!-- << 서비스모델명 검색 -->

                		<!-- << 서비스코드 검색 -->
                        <div class="mdc-text-field text-field mdc-text-field--outlined flex-ratio-two search-bar">
                            <input type="text" class="mdc-text-field__input"
                                    aria-describedby="text-field-outlined-shape-one-helper-text"
                                    v-model="searchCondition.serviceCode"/>
                            <div class="mdc-notched-outline mdc-notched-outline--upgraded">
                                <div class="mdc-notched-outline__leading"></div>
                                <div class="mdc-notched-outline__notch">
                                    <label class="mdc-floating-label">서비스코드</label>
                                </div>
                                <div class="mdc-notched-outline__trailing"></div>
                            </div>
                        </div>
                		<!-- << 서비스코드 검색 -->

                		<!-- << 작성자 검색 -->
                        <div class="mdc-text-field text-field mdc-text-field--outlined flex-ratio-one search-bar">
                            <input type="text" class="mdc-text-field__input"
                                    aria-describedby="text-field-outlined-shape-one-helper-text"
                                    v-model="searchCondition.uploadedBy"/>
                            <div class="mdc-notched-outline mdc-notched-outline--upgraded">
                                <div class="mdc-notched-outline__leading"></div>
                                <div class="mdc-notched-outline__notch">
                                    <label class="mdc-floating-label">작성자</label>
                                </div>
                                <div class="mdc-notched-outline__trailing"></div>
                            </div>
                        </div>
                		<!-- << 작성자 검색 -->

                    <!-- << 설명 검색 -->
                    <div class="mdc-text-field text-field mdc-text-field--outlined flex-ratio-one search-bar">
                      <input type="text" class="mdc-text-field__input"
                             aria-describedby="text-field-outlined-shape-one-helper-text"
                             v-model="searchCondition.description"/>
                      <div class="mdc-notched-outline mdc-notched-outline--upgraded">
                        <div class="mdc-notched-outline__leading"></div>
                        <div class="mdc-notched-outline__notch">
                          <label class="mdc-floating-label">설명</label>
                        </div>
                        <div class="mdc-notched-outline__trailing"></div>
                      </div>
                    </div>
                    <!-- << 설명 검색 -->

                		<!-- << 검색 버튼 -->
                        <button class="mdc-button mdc-button--unelevated mdc-ripple-upgraded" @click="search">
                                <span class="mdc-button__ripple"></span>
                                <i class="material-icons mdc-button__icon me-1">search</i>
                                <span class="mdc-button__label">검색</span>
                        </button>
                		<!-- << 검색 버튼 -->
		            </div>
		        </div>

        		<div class="card-body">
        		    <div class="table-controls form-row md-size">
        		        <!--검색 결과-->
                		<div class="table-result-info flex-auto">
                			<h4>검색결과 : <span>{{ pageInfo.total }}</span>건</h4>
                		</div>

                		<!--선택 삭제-->
                        <button
                            class="mdc-button mdc-button--outlined mdc-ripple-upgraded mdc-theme--error"
                            @click="deleteSelected">
                            <span class="mdc-button__ripple"></span>
                            <i class="material-icons mdc-button__icon">delete</i>
                            <span class="mdc-button__label">선택 삭제</span>
                        </button>

                		<!-- 페이지 사이즈 조절 -->
                        <div class="mdc-select mdc-select--outlined mdc-select--no-label">
                            <div class="mdc-select__anchor">
                                <div class="mdc-notched-outline">
                                    <span class="mdc-notched-outline__leading"></span>
                                    <div class="mdc-notched-outline__notch">
                                            <label class="mdc-floating-label">레코드 수</label>
                                    </div>
                                    <span class="mdc-notched-outline__trailing"></span>
                                </div>
                                <span class="mdc-select__selected-text-container overflow-hidden">
                                    <span class="mdc-select__selected-text"></span>
                                </span>
                                <span class="mdc-select__dropdown-icon"></span>
                            </div>
                            <div class="mdc-select__menu mdc-menu mdc-menu-surface mdc-menu-surface--fullwidth">
                                <ul class="mdc-deprecated-list">
                                    <li v-for="ps in pageSizes" class="mdc-deprecated-list-item"
                                            :data-value="ps"
                                            @click="searchCondition.pageSize = ps; currentPage = 1; search();"
                                            :class="{'mdc-deprecated-list-item--selected': searchCondition.pageSize == ps} "
                                            :aria-selected="searchCondition.pageSize == ps ? 'true' : 'false'">
                                            <span class="mdc-deprecated-list-item__ripple"></span>
                                            <span class="mdc-deprecated-list-item__text">{{ ps }}개</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
        		    </div>

            		<!-- 목록 테이블 -->
                    <div class="table-container">
                        <div class="mdc-data-table">
                            <div class="mdc-data-table__table-container">
                                <table class="mdc-data-table__table">
                                    <thead>
                                        <tr class="mdc-data-table__header-row">
                                            <th class="mdc-data-table__header-cell mdc-data-table__header-cell--checkbox text-center" role="columnheader" scope="col">
                                                <div class="mdc-form-field">
                                                    <div
                                                        class="mdc-checkbox mdc-data-table__header-row-checkbox mdc-checkbox--upgraded mdc-checkbox--selected mdc-ripple-upgraded mdc-ripple-upgraded--unbounded">
                                                        <input type="checkbox" class="mdc-checkbox__native-control" aria-checked="mixed"
                                                                @click="selectAllRows" id="toggleDelete"/>
                                                        <div class="mdc-checkbox__background">
                                                            <svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
                                                                <path class="mdc-checkbox__checkmark-path" fill="none"
                                                                        d="M1.73,12.91 8.1,19.28 22.79,4.59"></path>
                                                            </svg>
                                                            <div class="mdc-checkbox__mixedmark"></div>
                                                        </div>
                                                        <div class="mdc-checkbox__ripple"></div>
                                                    </div>
                                                </div>
                                            </th>
                                            <th class="mdc-data-table__header-cell text-center" role="columnheader" scope="col">No.</th>
                                            <th class="mdc-data-table__header-cell text-center" role="columnheader" scope="col">서비스 모델명</th>
                                            <th class="mdc-data-table__header-cell text-center" role="columnheader" scope="col">서비스 코드</th>
                                            <th class="mdc-data-table__header-cell text-center" role="columnheader" scope="col">설명</th>
                                            <th class="mdc-data-table__header-cell text-center" role="columnheader" scope="col">작성자</th>
                                            <th class="mdc-data-table__header-cell text-center" role="columnheader" scope="col">등록일시</th>
                                            <th class="mdc-data-table__header-cell text-center" role="columnheader" scope="col">수정일시</th>
                                        </tr>
                                    </thead>
                                    <tbody class="mdc-data-table__content">
                                        <tr v-if="searchResults.length == 0" class="mdc-data-table__row is-non-clickable" aria-selected="false">
                                            <td class="mdc-data-table__cell text-center" colspan="8">검색된 결과가 없습니다.</td>
                                        </tr>
                                        <tr v-else v-for="(row, i) in searchResults" class="detail-service-row mdc-data-table__row"
                                            aria-selected="false">
                                            <td class="mdc-data-table__cell mdc-data-table__cell--checkbox">
                                                <div
                                                    class="mdc-checkbox mdc-data-table__row-checkbox mdc-checkbox--upgraded mdc-ripple-upgraded mdc-ripple-upgraded--unbounded">
                                                    <input type="checkbox" class="mdc-checkbox__native-control deleteChk"
                                                            aria-labelledby="u60" :value="row.id"/>
                                                    <div class="mdc-checkbox__background">
                                                        <svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
                                                            <path class="mdc-checkbox__checkmark-path" fill="none"
                                                                    d="M1.73,12.91 8.1,19.28 22.79,4.59"></path>
                                                        </svg>
                                                        <div class="mdc-checkbox__mixedmark"></div>
                                                    </div>
                                                    <div class="mdc-checkbox__ripple"></div>
                                                </div>
                                            </td>
                                            <td class="mdc-data-table__cell text-center" @click="() => openDetailDialog(row.id)">
                                                {{ pageInfo.total - ( (currentPage - 1) * searchCondition.pageSize + i) }}
                                            </td>
                                            <td class="mdc-data-table__cell text-center" @click="() => openDetailDialog(row.id)">
                                                {{ row.serviceModelName }}
                                            </td>
                                            <td class="mdc-data-table__cell text-center" @click="() => openDetailDialog(row.id)">
                                                {{ row.serviceCode }}
                                            </td>
                                            <td class="mdc-data-table__cell" @click="() => openDetailDialog(row.id)">
                                                {{ row.description }}
                                            </td>
                                            <td class="mdc-data-table__cell text-center" @click="() => openDetailDialog(row.id)">
                                                {{ row.regId }}
                                            </td>
                                            <td class="mdc-data-table__cell text-center" @click="() => openDetailDialog(row.id)">
                                                {{ row.regDt }}
                                            </td>
                                            <td class="mdc-data-table__cell text-center" @click="() => openDetailDialog(row.id)">
                                                {{ row.updDt }}
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- pagination -->
                    <div class="table-pagination mdc-data-table__pagination">
                        <div class="mdc-data-table__pagination-trailing mdc-chip-set mdc-chip-set--choice">
                            <div class="mdc-data-table__pagination-navigation">
                                <button class="mdc-icon-button material-icons mdc-data-table__pagination-button fs-6"
                                        data-first-page="true" @click="gotoPage(1)">
                                    <div class="mdc-button__icon">first_page</div>
                                </button>
                                <button class="mdc-icon-button material-icons mdc-data-table__pagination-button fs-6"
                                        data-prev-page="true" @click="gotoPage(currentPage - 1)">
                                    <div class="mdc-button__icon">chevron_left</div>
                                </button>

                                <button v-for="(paging, index) in pages"
                                        class="mdc-chip mdc-data-table__pagination-button fs-6 bg-transparent"
                                        :class="{ 'mdc-chip--selected' : paging == currentPage }"
                                        @click="gotoPage(paging)">
                                    {{ paging }}
                                </button>
                                <button class="mdc-icon-button material-icons mdc-data-table__pagination-button fs-6"
                                        data-next-page="true" @click="gotoPage(currentPage + 1)">
                                    <div class="mdc-button__icon">chevron_right</div>
                                </button>
                                <button class="mdc-icon-button material-icons mdc-data-table__pagination-button fs-6"
                                        data-last-page="true" @click="gotoPage(pageInfo.pages)">
                                    <div class="mdc-button__icon">last_page</div>
                                </button>
                            </div>
                        </div>
                    </div>
        		</div>
		    </div>
		</div>
	</div>
	
	<!-- >>> 등록 팝업 -->
	<div id="insert-dialog" class="mdc-dialog" role="alertdialog" aria-modal="true"
		 aria-labelledby="simple-dialog-label" aria-describedby="simple-dialog-description" tabindex="-1">
		<div class="mdc-dialog__scrim"></div>
		<div class="mdc-dialog__container">
			<div class="mdc-dialog__surface">
				<div class="mdc-dialog__header">
					<h2 class="mdc-dialog__title">서비스 모델 등록</h2>
					<button class="mdc-icon-button material-icons close-button" tabindex="-1">
						close
					</button>
				</div>
				<!-- loading bar -->
				<div id="insert-service-model-dialog-loadingbar" role="progressbar"
					class="mdc-linear-progress mdc-linear-progress--indeterminate" hidden>
					<div class="mdc-linear-progress__buffering-dots"></div>
					<div class="mdc-linear-progress__buffer"></div>
					<div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar">
						<span class="mdc-linear-progress__bar-inner"></span>
					</div>
					<div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar">
						<span class="mdc-linear-progress__bar-inner"></span>
					</div>
				</div>
				<section class="mdc-dialog__content form-row-stack">
                    <p class="mdc-text-field-helper-text mdc-text-field-helper-text--persistent mdc-theme--error">
                        *모든 항목은 필수입력사항입니다.
                    </p>

                    <!--서비스모델명-->
                    <div class="form-row multiline-align-top">
                        <div class="flex-auto">
                            <div class="mdc-text-field text-field mdc-text-field--outlined w-100 lg-size">
                                <input type="text" class="mdc-text-field__input"
                                        aria-describedby="text-field-outlined-shape-one-helper-text" required
                                        id="insert-serviceModelName-input"
                                />
                                <div class="mdc-notched-outline mdc-notched-outline--upgraded">
                                    <div class="mdc-notched-outline__leading"></div>
                                    <div class="mdc-notched-outline__notch">
                                        <label class="mdc-floating-label">서비스모델명</label>
                                    </div>
                                    <div class="mdc-notched-outline__trailing"></div>
                                </div>
                            </div>
                            <div class="mdc-text-field-helper-line" id="insert-serviceModelName-helper-line">
                            </div>
                        </div>
                        <button class="mdc-button mdc-button--outlined mdc-ripple-upgraded lg-size"
                                id="insert-serviceModelName-dupcheck-btn" disabled>
                            <span class="mdc-button__ripple"></span>
                            <i class="material-icons mdc-button__icon">group</i>
                            <span class="mdc-button__label">중복확인</span>
                        </button>
                    </div>

                    <!--서비스코드-->
                    <div class="form-row multiline-align-top">
                        <div class="flex-auto">
                            <div class="mdc-text-field text-field mdc-text-field--outlined w-100 lg-size">
                                <input type="text" class="mdc-text-field__input"
                                        aria-describedby="text-field-outlined-shape-one-helper-text" required
                                        id="insert-serviceCode-input"
                                />
                                <div class="mdc-notched-outline mdc-notched-outline--upgraded">
                                    <div class="mdc-notched-outline__leading"></div>
                                    <div class="mdc-notched-outline__notch">
                                        <label class="mdc-floating-label">서비스코드</label>
                                    </div>
                                    <div class="mdc-notched-outline__trailing"></div>
                                </div>
                            </div>
                            <div class="mdc-text-field-helper-line" id="insert-serviceCode-helper-line">
                            </div>
                        </div>
                        <button class="mdc-button mdc-button--outlined mdc-ripple-upgraded lg-size"
                                id="insert-serviceCode-dupcheck-btn" disabled>
                            <span class="mdc-button__ripple"></span>
                            <i class="material-icons mdc-button__icon">group</i>
                            <span class="mdc-button__label">중복확인</span>
                        </button>
                    </div>

                    <!--설명-->
                    <div class="form-row multiline-align-top">
                        <div class="flex-auto">
                            <div class="mdc-text-field text-field mdc-text-field--outlined w-100 lg-size">
                                <input type="text" class="mdc-text-field__input"
                                        aria-describedby="text-field-outlined-shape-one-helper-text"
                                        id="insert-description-input"
                                />
                                <div class="mdc-notched-outline mdc-notched-outline--upgraded">
                                    <div class="mdc-notched-outline__leading"></div>
                                    <div class="mdc-notched-outline__notch">
                                        <label class="mdc-floating-label">설명</label>
                                    </div>
                                    <div class="mdc-notched-outline__trailing"></div>
                                </div>
                            </div>
                            <div class="mdc-text-field-helper-line" id="insert-description-helper-line">
                            </div>
                        </div>
                    </div>
				</section>
				<footer class="mdc-dialog__actions">
                    <button id="insert-btn" class="mdc-button mdc-button--unelevated mdc-ripple-upgraded">
                        <span class="mdc-button__ripple"></span>
                        <span class="mdc-button__label">등록</span>
                    </button>
                    <button
                        class="mdc-button mdc-button--unelevated mdc-ripple-upgraded mdc-theme--on-default mdc-theme--default-bg close-button">
                        <span class="mdc-button__ripple"></span>
                        <span class="mdc-button__label">취소</span>
                    </button>
				</footer>
			</div>
		</div>
	</div>
	<!-- <<< 등록 팝업 -->
	
	<!-- >>> 상세 팝업 -->
	<div id="detail-dialog" class="mdc-dialog mdc-dialog--scrollable" role="alertdialog" aria-modal="true"
		 aria-labelledby="simple-dialog-label" aria-describedby="simple-dialog-description" tabindex="-1">
		<div class="mdc-dialog__scrim"></div>
		<div class="mdc-dialog__container">
			<div class="mdc-dialog__surface">
				<div class="mdc-dialog__header">
					<h2 class="mdc-dialog__title">서비스모델 상세</h2>
					<button class="mdc-icon-button material-icons close-button" tabindex="-1">
						close
					</button>
				</div>
				<!-- loading bar -->
				<div id="detail-service-model-dialog-loadingbar" role="progressbar"
					class="mdc-linear-progress mdc-linear-progress--indeterminate" hidden>
					<div class="mdc-linear-progress__buffering-dots"></div>
					<div class="mdc-linear-progress__buffer"></div>
					<div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar">
						<span class="mdc-linear-progress__bar-inner"></span>
					</div>
					<div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar">
						<span class="mdc-linear-progress__bar-inner"></span>
					</div>
				</div>
				<section class="mdc-dialog__content form-row-stack">
                    <p class="mdc-text-field-helper-text mdc-text-field-helper-text--persistent mdc-theme--error">
                        *모든 항목은 필수입력사항입니다.
                    </p>
					<!-- 서비스모델명 -->
					<div class="form-row multiline-align-top">
                        <div class="flex-auto">
                            <div class="mdc-text-field text-field mdc-text-field--outlined w-100 lg-size">
                                <input type="text" class="mdc-text-field__input"
                                        aria-describedby="text-field-outlined-shape-one-helper-text" required
                                        id="detail-serviceModelName-input"
                                />
                                <div class="mdc-notched-outline mdc-notched-outline--upgraded">
                                    <div class="mdc-notched-outline__leading"></div>
                                    <div class="mdc-notched-outline__notch">
                                        <label class="mdc-floating-label">서비스모델명</label>
                                    </div>
                                    <div class="mdc-notched-outline__trailing"></div>
                                </div>
                            </div>
                            <div class="mdc-text-field-helper-line" id="detail-serviceModelName-helper-line">
                            </div>
                        </div>
                        <button class="mdc-button mdc-button--outlined mdc-ripple-upgraded lg-size"
                                id="detail-serviceModelName-dupcheck-btn" disabled>
                            <span class="mdc-button__ripple"></span>
                            <i class="material-icons mdc-button__icon">group</i>
                            <span class="mdc-button__label">중복확인</span>
                        </button>
					</div>
					
					<!-- 서비스코드 -->
					<div class="form-row multiline-align-top">
                        <div class="flex-auto">
                            <div class="mdc-text-field text-field mdc-text-field--outlined w-100 lg-size">
                                <input type="text" class="mdc-text-field__input"
                                        aria-describedby="text-field-outlined-shape-one-helper-text" required
                                        id="detail-serviceCode-input"
                                />
                                <div class="mdc-notched-outline mdc-notched-outline--upgraded">
                                    <div class="mdc-notched-outline__leading"></div>
                                    <div class="mdc-notched-outline__notch">
                                        <label class="mdc-floating-label">서비스코드</label>
                                    </div>
                                    <div class="mdc-notched-outline__trailing"></div>
                                </div>
                            </div>
                            <div class="mdc-text-field-helper-line" id="detail-serviceCode-helper-line">
                            </div>
                        </div>
                        <button class="mdc-button mdc-button--outlined mdc-ripple-upgraded lg-size"
                                id="detail-serviceCode-dupcheck-btn" disabled>
                            <span class="mdc-button__ripple"></span>
                            <i class="material-icons mdc-button__icon">group</i>
                            <span class="mdc-button__label">중복확인</span>
                        </button>
					</div>
					
					<!-- 설명 -->
					<div class="form-row multiline-align-top">
                        <div class="flex-auto">
                            <div class="mdc-text-field text-field mdc-text-field--outlined w-100 lg-size">
                                <input type="text" class="mdc-text-field__input"
                                        aria-describedby="text-field-outlined-shape-one-helper-text"
                                        id="detail-description-input"
                                />
                                <div class="mdc-notched-outline mdc-notched-outline--upgraded">
                                    <div class="mdc-notched-outline__leading"></div>
                                    <div class="mdc-notched-outline__notch">
                                        <label class="mdc-floating-label">설명</label>
                                    </div>
                                    <div class="mdc-notched-outline__trailing"></div>
                                </div>
                            </div>
                            <div class="mdc-text-field-helper-line" id="detail-description-helper-line">
                            </div>
                        </div>
					</div>

					<!-- 기본 정보 -->
                    <h4>기본 정보</h4>
					<div class="form-row">
              <div class="mdc-text-field text-field mdc-text-field--outlined flex-auto">
                  <input type="text" class="mdc-text-field__input"
                          aria-describedby="text-field-outlined-shape-one-helper-text" readonly required
                          id="detail-reg-date"
                          value=""/>
                  <div class="mdc-notched-outline mdc-notched-outline--upgraded">
                      <div class="mdc-notched-outline__leading"></div>
                      <div class="mdc-notched-outline__notch">
                          <label class="mdc-floating-label">등록일</label>
                      </div>
                      <div class="mdc-notched-outline__trailing"></div>
                  </div>
              </div>

              <div class="mdc-text-field text-field mdc-text-field--outlined flex-auto">
                  <input type="text" class="mdc-text-field__input"
                          aria-describedby="text-field-outlined-shape-one-helper-text" readonly required
                          id="detail-upd-regId"
                          value=""/>
                  <div class="mdc-notched-outline mdc-notched-outline--upgraded">
                      <div class="mdc-notched-outline__leading"></div>
                      <div class="mdc-notched-outline__notch">
                          <label class="mdc-floating-label">등록자</label>
                      </div>
                      <div class="mdc-notched-outline__trailing"></div>
                  </div>
              </div>
					</div>
				</section>
				<footer class="mdc-dialog__actions">
                    <button
                        class="mdc-button mdc-button--unelevated mdc-ripple-upgraded mdc-theme--on-error mdc-theme--error-bg"
                        id="delete-btn">
                        <span class="mdc-button__ripple"></span>
                        <span class="mdc-button__label">삭제</span>
                    </button>
                    <button
                        class="mdc-button mdc-button--unelevated mdc-ripple-upgraded mdc-theme--on-default mdc-theme--default-bg dialog-close-btn close-button">
                        <span class="mdc-button__ripple"></span>
                        <span class="mdc-button__label">취소</span>
                    </button>
                    <button id="update-btn" class="mdc-button mdc-button--unelevated mdc-ripple-upgraded">
                        <span class="mdc-button__ripple"></span>
                        <span class="mdc-button__label">수정</span>
                    </button>
				</footer>
			</div>
		</div>
	</div>
	<!-- <<< 상세 팝업 -->
	
	<input type="hidden" readonly id="smpServiceUriPrefix" th:value="${smpServiceUriPrefix}">
	<input type="hidden" readonly id="defaultPageSize" th:value="${defaultPageSize}">
</th:block>

<th:block layout:fragment="script">
	<script type="text/javascript">
        (function () {
            new Vue({
                el: ".contentRoot",
                data: {
                    // 팝업
                    insertDialog: mdc.dialog.MDCDialog.attachTo(document.querySelector('#insert-dialog')),
                    detailDialog: mdc.dialog.MDCDialog.attachTo(document.querySelector('#detail-dialog')),
                    insertDialogLoadingBar: $("#insert-service-model-dialog-loadingbar"),
                    detailDialogLoadingBar: $("#detail-service-model-dialog-loadingbar"),
                    // 검색
                    searchCondition: {
                        pageSize: $("#defaultPageSize").val(),
                        serviceModelId: 0,
                        serviceModelName: "",
                        serviceCode: "",
                        uploadedBy: "",
                        description: "",
                        from: "",
                        to: ""
                    },
                    searching: false,
                    searchResults: [],

                    // pagination
                    pageSizes: [10, 20, 30, 40, 50],
                    currentPage: 1,
                    pageInfo: {
                        pages: 1,
                        total: 1
                    },
                    pageNumLists: [1],

                    // 검색 조건
                    dataTypes: [],
                    serviceModels: [],
                    newObj: JSON.parse(JSON.stringify(
                        {
                            "serviceModelId": 0,
                            "serviceModelName": "",
                            "serviceCode": "",
                            "description": "",
                            "nameDupCheck": true,
                            "codeDupCheck": true
                        }
                    )),
                    detailObj: JSON.parse(JSON.stringify(
                        {
                            "regDt": "",
                            "regId": "",
                            "serviceModelId": 0,
                            "serviceModelName": "",
                            "serviceCode": "",
                            "description": "",
                            "nameDupCheck": true,
                            "codeDupCheck": true
                        }
                    )),
                    prevDetailObj: JSON.parse(JSON.stringify(
                        {
                            "regDt": "",
                            "regId": "",
                            "serviceModelId": 0,
                            "serviceModelName": "",
                            "serviceCode": "",
                            "description": "",
                            "nameDupCheck": true,
                            "codeDupCheck": true
                        }
                    )),
                    prevServiceModelName: "",
                    prevRepeat: "",
                    prevDescription: "",

                    // constant
                    SERVICE_MODEL_NAME_MAX_LENGTH: 255,
                    SERVICE_CODE_MAX_LENGTH: 255,
                    DESCRIPTION_MAX_LENGTH: 255,

                    // etc
                    currentXhr: [], 		// 모달 내 XHR 중단할 때 사용
                    checkXhrAbort: false,	// 모달 내에서 등록/저장 등 업로드 시엔 컨펌 추가
                    currentDialog: null     // vue data에서 정의한 모달의 key. ( :string)
                },
                computed: {
                    pages: function () {
                        const list = [];
                        for (let index = this.startPage; index <= this.endPage; index += 1) {
                            list.push(index);
                        }
                        return list;
                    },
                    startPage() {
                        return parseInt((this.currentPage - 1) / 5) * 5 + 1;
                    },
                    endPage() {
                        var lastPage = parseInt((this.currentPage - 1) / 5 + 1) * 5;
                        return lastPage <= this.pageInfo.pages ? lastPage : this.pageInfo.pages;
                    }
                },
                created: function () {
                    // Base url 받아오기
                    const baseUrl = document.querySelector('#smpServiceUriPrefix').value;
                    this.baseUrl = baseUrl;

                    this.search();
                },
                mounted: function () {

                    // 페이지 이동시 처리
                    $('#drawer-main-content-viewer').one('page.move', function () {
                        console.log("page move out");
                    });
                    this.initMaterialUx();
                    this.initSearchBarEvents();

                    var self = this;

                    // >>> 등록 dialog 설정
                    var insertDialog = this.insertDialog;

                    /*$('#insert-dialog-btn').off('click').on('click', function () {
                        insertDialog.open();
                    });*/

                    insertDialog.listen('MDCDialog:opening', function () {

                        // 화면 및 데이터 초기화
                        self.initializeInsertDialog();

                        // component 이벤트 등록
                        $("#insert-serviceModelName-input").off('keyup').on('keyup', self.onChangeInsertServiceModelName)
                        $("#insert-serviceModelName-dupcheck-btn").off('click').on('click', self.onClickInsertServiceModelNameDupCheck)
                        $("#insert-serviceCode-input").off('keyup').on('keyup', self.onChangeInsertServiceCode)
                        $("#insert-serviceCode-dupcheck-btn").off('click').on('click', self.onClickInsertServiceCodeDupCheck)
                        $("#insert-description-input").off('keyup').on('keyup', self.onChangeInsertDescription)

                        $("#insert-btn").off('click').on('click', self.insert)
                    });

                    $('#insert-dialog-btn').off('click').on('click', function () {
                        self.insertDialog.open();
                        self.currentDialog = 'insertDialog';
                    });
                    // <<< 등록 dialog 설정

                    // >>> 상세 dialog 설정
                    var detailDialog = this.detailDialog;
                    detailDialog.listen('MDCDialog:opening', function () {
                        // 화면 및 데이터 초기화
                        self.initializeUpdateDialog();

                        // 이벤트 등록
                        $("#detail-serviceModelName-input").off('keyup').on('keyup', self.onChangeUpdateServiceModelName)
                        $("#detail-serviceModelName-dupcheck-btn").off('click').on('click', self.onClickUpdateServiceModelNameDupCheck)
                        $("#detail-serviceCode-input").off('keyup').on('keyup', self.onChangeUpdateServiceCode)
                        $("#detail-serviceCode-dupcheck-btn").off('click').on('click', self.onClickUpdateServiceCodeDupCheck)
                        $("#detail-description-input").off('keyup').on('keyup', self.onChangeUpdateDescription)

                        $("#update-btn").off('click').on('click', self.update)
                        $("#delete-btn").off('click').on('click', self.delete)

                    });
                    // <<< 상세 dialog 설정

                    // 모달 닫을 때 데이터 요청/전송 취소
                    $('.close-button').off('click').on('click', function () {
                        self.onCloseDialog();
                    })
                    $('.mdc-dialog').on('keydown', function (e) {
                      if (e.key === 'Escape') self.onCloseDialog();
                    })
                },
                methods: {
                    initMaterialUx: function () {
                        // ripple material ux 적용
                        const elements = document.querySelectorAll('.mdc-ripple-upgraded');
                        for (const el of elements) {
                            el.class
                            mdc.ripple.MDCRipple.attachTo(el, el.classList.contains('mdc-ripple-upgraded--unbounded') ? {
                                isUnbounded: true
                            } : void 0);
                        }

                        // input text material ux 적용
                        const textFields = document.querySelectorAll('.mdc-text-field');
                        for (const textField of textFields) {
                            const mdcTextField = mdc.textField.MDCTextField.attachTo(textField);
                            $(textField).data('instance', mdcTextField);
                        }

                        // select material ux 적용
                        const selects = document.querySelectorAll('.mdc-select');
                        for (const el of selects) {
                            const select = mdc.select.MDCSelect.attachTo(el);
                            $(el).data('instance', select); //
                        }

                        // dialog에 close 이벤트 주는 방법: escape key, dialog 외부 클릭 막기.
                        this.insertDialog.scrimClickAction = "";
                        this.detailDialog.scrimClickAction = "";
                    },

                    // 검색
                    search: function () {
                        this._setSearching(true);

                        this.searchCondition.serviceModelName = this.searchCondition.serviceModelName.trim();
                        this.searchCondition.serviceCode = this.searchCondition.serviceCode.trim();
                        this.searchCondition.uploadedBy = this.searchCondition.uploadedBy.trim();
                        this.searchCondition.description = this.searchCondition.description.trim();

                        var searchConditions = {...this.searchCondition}
                        searchConditions['pageNum'] = this.currentPage;

                        commonObject.deleteNullOrDefaultFields(searchConditions);
                        var queryString = Qs.stringify(searchConditions);

                        $.ajax({
                            url: this.baseUrl + "/serviceModel/api/listPage?" + queryString,
                            method: "get",
                            contentType: 'application/json; charset=UTF-8',
                            dataType: "json"
                        }).done(data => {
                            this._setSearchResultsPageInfo(data); // 검색 결과 페이지 정보 저장
                            this._setSearchResults(data.result); // 검색 결과 목록
                        }).always(() => {
                            this._setSearching(false);
                            this.initCheckBox();
                        })
                    },

                    // 상세
                    detail: function (serviceModelId, callback) {
                        $.ajax({
                            url: this.baseUrl + "/serviceModel/api/detail/" + serviceModelId,
                            method: "get",
                            contentType: 'application/json; charset=UTF-8',
                            dataType: "json",
                        }).done(result => {
                            this.detailObj = {...result.result};
                            this.detailObj.serviceModelNameDupCheck = true;
                            this.detailObj.serviceCodeDupCheck = true;

                            this.prevDetailObj = {...result.result};
                            this.prevServiceModelName = result.result.serviceModelName;
                            this.prevServiceCode = result.result.serviceCode;
                            this.prevDescription = result.result.description;

                            callback();
                        });
                    },

                    // 등록
                    insert: function (e) {
                        if (!this.validateInsert()) {
                            return;
                        }
                        const self = this;

                        var newObj = {...this.newObj}

                        delete newObj['serviceModelNameDupCheck']
                        delete newObj['serviceCodeDupCheck']

                        console.log('newoBJ', newObj);
                        if (confirm("등록하시겠습니까?")) {
							this.setDialogLoading(this.insertDialogLoadingBar, true);
                            this.checkXhrAbort = true;
                            this.dispatchProcessing('process');
                            let apiUrl = this.baseUrl + "/serviceModel/api/insert";
                            let xhr = $.ajax({
                                url: apiUrl,
                                method: "post",
                                contentType: 'application/json; charset=UTF-8',
                                dataType: "json",
                                data: JSON.stringify(newObj)
                            }).done(result => {
                                toastr.success(result.resultMsg);
                                if (result.resultCode == "0000") {
                                    self.insertDialog.close();
                                }
                            }).always(() => {
								this.setDialogLoading(this.insertDialogLoadingBar, false);
                                this.search();
                                self.checkXhrAbort = false;
                                self.dispatchProcessing('done');
                            });
                            let result = {id: apiUrl, xhr};
                            self.currentXhr.push(result);
                        }
                        e.preventDefault();
                        e.stopPropagation();
                    },

                    // 수정
                    update: function (e) {

                        if (!this.validateUpdate()) {
                            return;
                        }

                        var updateObj = {...this.detailObj}

                        delete updateObj['serviceModelNameDupCheck']
                        delete updateObj['serviceCodeDupCheck']

                        let apiUrl = this.baseUrl + "/serviceModel/api/update";

                        if (confirm("수정하시겠습니까?")) {
							this.setDialogLoading(this.detailDialogLoadingBar, true);
                            this.checkXhrAbort = true;
                            this.dispatchProcessing('process');
                            const self = this;
                            let xhr = $.ajax({
                                url: apiUrl,
                                method: "post",
                                contentType: 'application/json; charset=UTF-8',
                                dataType: "json",
                                data: JSON.stringify(updateObj)
                            }).done(result => {
                                toastr.success(result.resultMsg);

                                if (result.resultCode == "0000") {
                                    this.detailDialog.close();
                                }
                            }).always(() => {
								this.setDialogLoading(this.detailDialogLoadingBar, false);
                                this.search();
                                // 배열에서 해당 xhr 제거 및 checkXhrAbort 초기화
                                let result = self.currentXhr.find(obj => obj.id === apiUrl);
                                if (result) {
                                  let index = self.currentXhr.indexOf(result);
                                  self.currentXhr.splice(index, 1);
                                }
                                self.checkXhrAbort = false;
                                self.dispatchProcessing('done');
                            });
                            // abort 적용을 위해 xhr 객체에 id를 추가해 배열에 push
                            let result = {id: apiUrl, xhr};
                            self.currentXhr.push(result);
                        }
                    },

                    // 삭제
                    delete: function () {

                        var serviceModelId = this.detailObj.id;
                        var serviceModelIdList = [serviceModelId];
                        var postBody = {
                            serviceModelIdList: serviceModelIdList
                        };

                        if (confirm("삭제하시겠습니까?")) {
                            $.ajax({
                                url: this.baseUrl + "/serviceModel/api/delete",
                                method: "post",
                                contentType: 'application/json; charset=UTF-8',
                                dataType: "json",
                                data: JSON.stringify(postBody)
                            }).done(result => {
                                toastr.success(result.resultMsg)
                                this.detailDialog.close();
                            }).always(() => {
                                this.search();
                            });
                        }
                    },

                    // 선택 삭제
                    deleteSelected: function () {

                        var serviceModelIdList = $.map($('.deleteChk:checkbox:checked'), function (chk) {
                            return $(chk).val();
                        });

                        if (serviceModelIdList && serviceModelIdList.length == 0) {
                            toastr.error("삭제 할 항목을 선택해주세요.");
                            return;
                        }

                        var postBody = {
                            serviceModelIdList: serviceModelIdList
                        };

                        if (confirm("선택한 항목을 삭제하시겠습니까?")) {
                            $.ajax({
                                url: this.baseUrl + "/serviceModel/api/delete",
                                method: "post",
                                contentType: 'application/json; charset=UTF-8',
                                dataType: "json",
                                data: JSON.stringify(postBody)
                            }).done(result => {
                                toastr.success(result.resultMsg)
                                this.search();

                                this.initCheckBox();
                            });
                        }
                    },

                    // 등록 팝업 초기화
                    initializeInsertDialog: function () {

                        // 서비스모델명
                        $($('#insert-serviceModelName-input')[0].parentElement).data('instance').value = '';
                        this._showValidationHelperLine('', $("#insert-serviceModelName-helper-line"), '서비스모델명');
                        this._disableInsertServiceModelNameDuplCheckBtn(true);

                        // 서비스코드
                        $($('#insert-serviceCode-input')[0].parentElement).data('instance').value = '';
                        this._showValidationHelperLine('', $("#insert-serviceCode-helper-line"), '서비스코드');
                        this._disableInsertServiceCodeDuplCheckBtn(true);

                        // 설명
                        $($('#insert-description-input')[0].parentElement).data('instance').value = '';
                        this._showValidationHelperLine('', $("#insert-description-helper-line"), '설명');
                    },

                    // 상세 팝업 초기화
                    initializeUpdateDialog: function () {

                        // 서비스모델명
                        $($('#detail-serviceModelName-input')[0].parentElement).data('instance').value = this.detailObj.serviceModelName;
                        this._showValidationHelperLine('', $("#detail-serviceModelName-helper-line"), '서비스모델명');
                        /*_showInsertServiceModelNameValidation();*/
                        this._disableUpdateServiceModelNameDuplCheckBtn(true);

                        // 서비스코드
                        $($('#detail-serviceCode-input')[0].parentElement).data('instance').value = this.detailObj.serviceCode;
                        this._showValidationHelperLine('', $("#detail-serviceCode-helper-line"), '서비스코드');
                        /*_showInsertServiceModelNameValidation();*/
                        this._disableUpdateServiceCodeDuplCheckBtn(true);

                        // 설명
                        if(this.detailObj.description) {
							$($('#detail-description-input')[0].parentElement).data('instance').value = this.detailObj.description;
                        	this._showValidationHelperLine('', $("#detail-description-helper-line"), '설명');	
						}
                        
                        /*if (this.detailObj.description != null && this.detailObj.description != undefined && this.detailObj.description != '') {
							$($('#detail-description-input')[0].parentElement).data('instance').value = this.detailObj.description;
							this._showValidationHelperLine('', $("#detail-description-helper-line"), '설명');
						}*/
						if (this.detailObj.regDt) {
							// 등록일
							$($('#detail-reg-date')[0].parentElement).data('instance').value = this.detailObj.regDt
						}

						if (this.detailObj.regDt) {
	                        // 수정일
                       		$($('#detail-upd-regId')[0].parentElement).data('instance').value = this.detailObj.regId
						}

                    },

                    // 검색 이벤트
                    initSearchBarEvents: function () {
                        var self = this;
                        $('.search-bar input').on("keydown", function (e) {
                            if (e.keyCode == 13) {
                                self.search();
                            }
                        });
                    },

                    _setSearchResults: function (result) {
                        this.searchResults = result;
                    },
                    _setSearchResultsPageInfo: function (data) {
                        this.pageInfo.pages = data.pages;
                        this.pageInfo.total = data.total;
                    },
                    _setSearching: function (searching) {
                        this.searching = searching;
                    },

                    // 페이지네이션
                    gotoPage: function (pageNum) {
                        let validPageNum = pageNum;
                        if (pageNum < 1) {
                            validPageNum = 1;
                        } else if (pageNum > this.pageInfo.pages) {
                            validPageNum = this.pageInfo.pages;
                        }

                        this.currentPage = validPageNum;
                        this.search();
                    },

                    // insert 이벤트
                    onChangeInsertServiceModelName: function (e) {

                        e.stopPropagation();
                        var newObj = e.target.value;
                        e.target.value = newObj;

                        var $helperLine = $("#insert-serviceModelName-helper-line")
                        this.newObj.serviceModelNameDupCheck = false;

                        if (this.validateServiceModelName(e.target.value)) {
                            this._disableInsertServiceModelNameDuplCheckBtn(false)
                            this._showValidationHelperLine("DUPCHECK", $helperLine, "서비스모델명");
                        } else {
                            this._disableInsertServiceModelNameDuplCheckBtn(true)
                            this._showValidationHelperLine("INVALID", $helperLine, "서비스모델명");
                            e.target.focus();
                        }
                        this.newObj.serviceModelName = newObj;
                    },
                    onClickInsertServiceModelNameDupCheck: function () {
                        var self = this;

                        this.checkDuplicateServiceModelName(this.newObj, function () {
                            if (self.newObj.serviceModelNameDupCheck) {
                                self._showValidationHelperLine('VALID', $("#insert-serviceModelName-helper-line"), '서비스모델명');
                            } else {
                                self._showValidationHelperLine('DUPCHECK', $("#insert-serviceModelName-helper-line"), '서비스모델명');
                            }
                        });
                    },
                    onChangeInsertServiceCode: function (e) {

                        e.stopPropagation();
                        var newObj = e.target.value;
                        e.target.value = newObj;

                        var $helperLine = $("#insert-serviceCode-helper-line")
                        this.newObj.serviceCodeDupCheck = false;

                        if (this.validateServiceCode(e.target.value)) {
                            this._disableInsertServiceCodeDuplCheckBtn(false)
                            this._showValidationHelperLine("DUPCHECK", $helperLine, "서비스코드");
                        } else {
                            this._disableInsertServiceCodeDuplCheckBtn(true)
                            this._showValidationHelperLine("INVALID", $helperLine, "서비스코드");
                            e.target.focus();
                        }
                        this.newObj.serviceCode = newObj;
                    },
                    onClickInsertServiceCodeDupCheck: function () {
                        var self = this;

                        this.checkDuplicateServiceCode(this.newObj, function () {
                            if (self.newObj.serviceCodeDupCheck) {
                                self._showValidationHelperLine('VALID', $("#insert-serviceCode-helper-line"), '서비스코드');
                            } else {
                                self._showValidationHelperLine('DUPCHECK', $("#insert-serviceCode-helper-line"), '서비스코드');
                            }
                        });
                    },
                    onChangeInsertDescription: function (e) {

                        e.stopPropagation();
                        var newDescription = e.target.value;
                        e.target.value = newDescription;

                        var $helperLine = $("#insert-description-helper-line")

                        if (this.validateDescription(e.target.value)) {
                            this._showValidationHelperLine("VALID", $helperLine, "설명");
                            this.newObj.description = newDescription;
                        } else {
                            this._showValidationHelperLine("INVALID", $helperLine, "설명");
                            e.target.focus();
                        }

                    },
                    _disableInsertServiceModelNameDuplCheckBtn: function (disabled) {
                        $("#insert-serviceModelName-dupcheck-btn").prop("disabled", disabled);
                    },
                    _disableInsertServiceCodeDuplCheckBtn: function (disabled) {
                        $("#insert-serviceCode-dupcheck-btn").prop("disabled", disabled);
                    },
                    _showValidationHelperLine: function (mode, $helperline, key) {
                        if (mode == "VALID") {
                            $helperline.html(
                                `<p class="mdc-text-field-helper-text mdc-text-field-helper-text--persistent mdc-text-field-helper-text--validation-msg mdc-theme--success">
                                                        사용 가능한 ${key}입니다.
                                                    </p>`
                            )
                        } else if (mode == "DUPCHECK") {
                            $helperline.html(
                                `<p class="mdc-text-field-helper-text mdc-text-field-helper-text--persistent mdc-text-field-helper-text--validation-msg mdc-theme--warning ">
                                                        ${key} 중복 체크를 해주세요.
                                                    </p>`
                            )
                        } else if (mode == "INVALID") {
                            $helperline.html(
                                `<p class="mdc-text-field-helper-text mdc-text-field-helper-text--persistent mdc-text-field-helper-text--validation-msg mdc-theme--error ">
                                                        유효하지 않은 ${key}입니다.
                                                    </p>`
                            )
                        } else {
                            $helperline.html('<p class="mdc-text-field-helper-text mdc-text-field-helper-text--persistent mdc-text-field-helper-text--validation-msg "></p>');
                        }
                    },

                    // update 이벤트
                    onChangeUpdateServiceModelName: function (e) {

                        e.stopPropagation();
                        var detailObj = e.target.value;
                        e.target.value = detailObj;

                        var $helperLine = $("#detail-serviceModelName-helper-line")
                        if (detailObj != this.prevServiceModelName) {
                            this.detailObj.serviceModelNameDupCheck = false;

                            if (this.validateServiceModelName(e.target.value)) {
                                this._disableUpdateServiceModelNameDuplCheckBtn(false)
                                this._showValidationHelperLine("DUPCHECK", $helperLine, "서비스모델명");
                            } else {
                                this._disableUpdateServiceModelNameDuplCheckBtn(true)
                                this._showValidationHelperLine("INVALID", $helperLine, "서비스모델명");
                                e.target.focus();
                            }

                        } else {
                            this.detailObj.serviceModelNameDupCheck = true;
                            this._disableUpdateServiceModelNameDuplCheckBtn(true)
                            this._showValidationHelperLine("", $helperLine, "서비스모델명");
                        }

                        this.detailObj.serviceModelName = detailObj;
                    },
                    onChangeUpdateServiceCode: function (e) {

                        e.stopPropagation();
                        var detailObj = e.target.value;
                        e.target.value = detailObj;

                        var $helperLine = $("#detail-serviceCode-helper-line")
                        if (detailObj != this.prevServiceCode) {
                            this.detailObj.serviceCodeDupCheck = false;

                            if (this.validateServiceCode(e.target.value)) {
                                this._disableUpdateServiceCodeDuplCheckBtn(false)
                                this._showValidationHelperLine("DUPCHECK", $helperLine, "서비스코드");
                            } else {
                                this._disableUpdateServiceCodeDuplCheckBtn(true)
                                this._showValidationHelperLine("INVALID", $helperLine, "서비스코드");
                                e.target.focus();
                            }

                        } else {
                            this.detailObj.serviceCodeDupCheck = true;
                            this._disableUpdateServiceCodeDuplCheckBtn(true)
                            this._showValidationHelperLine("", $helperLine, "서비스코드");
                        }

                        this.detailObj.serviceCode = detailObj;
                    },
                    onChangeUpdateDescription: function (e) {

                        e.stopPropagation();
                        var newObj = e.target.value;
                        e.target.value = newObj;

                        var $helperLine = $("#detail-description-helper-line")

                        if (this.validateDescription(e.target.value)) {
                            this._showValidationHelperLine("", $helperLine, "설명");
                        } else {
                            this._showValidationHelperLine("INVALID", $helperLine, "설명");
                            e.target.focus();
                        }

                        this.detailObj.description = newObj;
                    },
                    onClickUpdateServiceModelNameDupCheck: function () {
                        var self = this;

                        this.checkDuplicateServiceModelName(this.detailObj, function () {
                            if (self.detailObj.serviceModelNameDupCheck) {
                                self._showValidationHelperLine('VALID', $("#detail-serviceModelName-helper-line"), '서비스모델명');
                            } else {
                                self._showValidationHelperLine('DUPCHECK', $("#detail-serviceModelName-helper-line"), '서비스모델명');
                            }
                        });
                    },
                    onClickUpdateServiceCodeDupCheck: function () {
                        var self = this;

                        this.checkDuplicateServiceCode(this.detailObj, function () {
                            if (self.detailObj.serviceCodeDupCheck) {
                                self._showValidationHelperLine('VALID', $("#detail-serviceCode-helper-line"), '서비스코드');
                            } else {
                                self._showValidationHelperLine('DUPCHECK', $("#detail-serviceCode-helper-line"), '서비스코드');
                            }
                        });
                    },
                    _disableUpdateServiceModelNameDuplCheckBtn: function (disabled) {
                        $("#detail-serviceModelName-dupcheck-btn").prop("disabled", disabled);
                    },
                    _disableUpdateServiceCodeDuplCheckBtn: function (disabled) {
                        $("#detail-serviceCode-dupcheck-btn").prop("disabled", disabled);
                    },

                    // 중복 체크
                    checkDuplicateServiceModelName: function (obj, callback) {
                        var newObj = {
                            "serviceModelName": String(obj.serviceModelName)
                        }

                        $.ajax({
                            url: this.baseUrl + "/serviceModel/api/existServiceModelName",
                            method: "post",
                            data: newObj,
                            dataType: "json"
                        }).done(data => {
                            if (data.resultCode == "0000") {
                                obj.serviceModelNameDupCheck = true;
                            } else {
                                toastr.error("이미 등록된 서비스모델명입니다.")
                            }
                            callback();
                        })
                    },
                    checkDuplicateServiceCode: function (obj, callback) {
                        var newObj = {
                            "serviceCode": String(obj.serviceCode)
                        }

                        $.ajax({
                            url: this.baseUrl + "/serviceModel/api/existServiceCode",
                            method: "post",
                            data: newObj,
                            dataType: "json"
                        }).done(data => {
                            if (data.resultCode == "0000") {
                                obj.serviceCodeDupCheck = true;
                            } else {
                                toastr.error("이미 등록된 서비스코드입니다.")
                            }
                            callback();
                        })
                    },
                    // 유효성 검사 (액션별)
                    validateInsert: function () {

                        // 서비스모델명
                        if (!this.validateServiceModelName($($("#insert-serviceModelName-input")[0].parentElement).data('instance').value)) {
                            toastr.error("서비스모델명 입력 형식이 맞지 않습니다. 공백 포함 " + this.SERVICE_MODEL_NAME_MAX_LENGTH + "자 내외.")
                            return false;
                        }

                        if (!this.newObj.serviceModelNameDupCheck) {
                            toastr.error("서비스모델명 중복 체크를 진행해주세요.")
                            return false;
                        }

                        // 서비스코드
                        if (!this.validateServiceCode($($("#insert-serviceCode-input")[0].parentElement).data('instance').value)) {
                            toastr.error("서비스코드 입력 형식이 맞지 않습니다. 공백 포함 " + this.SERVICE_CODE_MAX_LENGTH + "자 내외.")
                            return false;
                        }

                        if (!this.newObj.serviceCodeDupCheck) {
                            toastr.error("서비스코드 중복 체크를 진행해주세요.")
                            return false;
                        }

                        // 설명
                        if (!this.validateDescription($($("#insert-description-input")[0].parentElement).data('instance').value)) {
                            toastr.error("설명 입력 형식이 맞지 않습니다. 공백 포함 " + this.DESCRIPTION_MAX_LENGTH + "자 내외.")
                            return;
                        }

                        return true;
                    },
                    validateUpdate: function () {

                        // 서비스모델명
                        if (!this.validateServiceModelName($($("#detail-serviceModelName-input")[0].parentElement).data('instance').value)) {
                            toastr.error("서비스모델명 입력 형식이 맞지 않습니다. 공백 포함 " + this.SERVICE_MODEL_NAME_MAX_LENGTH + "자 내외.")
                            return false;
                        }

                        if (!this.detailObj.serviceModelNameDupCheck) {
                            toastr.error("서비스모델명 중복 체크를 진행해주세요.")
                            return false;
                        }

                        // 서비스코드
                        if (!this.validateServiceCode($($("#detail-serviceCode-input")[0].parentElement).data('instance').value)) {
                            toastr.error("서비스코드 입력 형식이 맞지 않습니다. 공백 포함 " + this.SERVICE_CODE_MAX_LENGTH + "자 내외.")
                            return false;
                        }

                        if (!this.detailObj.serviceCodeDupCheck) {
                            toastr.error("서비스코드 중복 체크를 진행해주세요.")
                            return false;
                        }
						
                        return true;
                    },
                    // 유효성 검사 (필드별)
                    validateServiceModelName: function (value) {
                        // 최대 글자, 빈 값
                        var newValue = value.trim();

                        return newValue.length <= this.SERVICE_MODEL_NAME_MAX_LENGTH && newValue.length > 0;
                    },
                    validateServiceCode: function (value) {
                        // 최대 글자, 빈 값
                        var newValue = value.trim();

                        return newValue.length <= this.SERVICE_CODE_MAX_LENGTH && newValue.length > 0;
                    },
                    validateDescription: function (value) {
                        // 최대 글자
                        var newValue = value.trim();
                        return newValue.length <= this.DESCRIPTION_MAX_LENGTH;
                    },
                    _showInsertServiceModelNameValidation: function (mode) {
                        var $herlperline = $("#insert-serviceModelName-helper-line");
                        if (mode == "VALID") {
                            $herlperline.html(
                                `<p class="mdc-text-field-helper-text mdc-text-field-helper-text--persistent mdc-text-field-helper-text--validation-msg mdc-theme--success">
                                    입력 가능한 서비스모델명입니다.
                                </p>`
                            )
                        } else if (mode == "DUPCHECK") {
                            $herlperline.html(
                                `<p class="mdc-text-field-helper-text mdc-text-field-helper-text--persistent mdc-text-field-helper-text--validation-msg mdc-theme--warning ">
                                    서비스모델명 중복 체크를 해주세요.
                                </p>`
                            )
                        } else if (mode == "INVALID") {
                            $herlperline.html(
                                `<p class="mdc-text-field-helper-text mdc-text-field-helper-text--persistent mdc-text-field-helper-text--validation-msg mdc-theme--error ">
                                    입력 형식에 맞지 않는 서비스모델명입니다. 공백포함 255자 내외로 입력 가능합니다.
                                </p>`
                            )
                        } else {
                            $herlperline.html('<p class="mdc-text-field-helper-text mdc-text-field-helper-text--persistent mdc-text-field-helper-text--validation-msg "></p>');
                        }
                    },

                    // 상세 페이지 오픈
                    openDetailDialog: function (serviceModelId) {
                        var self = this;
                        this.detail(serviceModelId, () => self.detailDialog.open());
                        this.currentDialog = 'detailDialog';
                    },
                    selectAllRows: function () {
                        var toggle = $("#toggleDelete").is(':checked');

                        $('.deleteChk:checkbox').each(function () {
                            $(this).prop('checked', toggle);
                        });
                    },
                    initCheckBox: function () {
                        $("#toggleDelete").prop('checked', false);
                        $('.deleteChk:checkbox').each(function () {
                            $(this).prop('checked', false);
                        });
					},
					setDialogLoading: function (loadingBarJqueryEl, option) {
						if (option == true) {
							loadingBarJqueryEl.show();
							return;
						}
						loadingBarJqueryEl.hide();
					},

                    /**
                     * 모달 닫을 때 데이터 요청/전송 취소
                     */
                    onCloseDialog: function () {
                        const self = this;
                        if (self.currentXhr.length !== 0) {
                            if (self.checkXhrAbort && !confirm('취소 시 저장 및 업로드가 중단됩니다.')) return;
                            [...self.currentXhr].forEach(xhrItem => xhrItem.xhr.abort())
                            self.dispatchProcessing('done');
                        }
                        if (self.currentDialog) {
                            self[self.currentDialog].close();
                            self.currentDialog = null;
                        }
                    },

                    /**
                     *
                     * @param state: 'process' || 'done'
                     * 디스패치 시 모달 본문에 유저 동작 방지 적용 및 닫기/취소를 제외한 버튼 비활성화
                     */
                    dispatchProcessing: function (state) {
                        let $modalSurface;
                        let $modalBtn;
                        if (state === 'process') {
                            // 닫기/취소를 제외한 버튼 선택
                            $modalBtn = $('.mdc-dialog--open .mdc-dialog__surface .mdc-button').not('.close-button');
                            // 현재 열려있는 모달 선택
                            $modalSurface = $('.mdc-dialog--open .mdc-dialog__surface');
                            $modalBtn.prop('disabled', true);
                            $modalSurface.addClass('is-processing');
                        } else if (state === 'done') {
                            // 진행 중인 모달 선택.
                            // 모달 닫는게 먼저 실행되면 .mdc-dialog--open으로 선택 불가
                            $modalBtn = $('.mdc-dialog__surface.is-processing .mdc-button').not('.close-button');
                            $modalSurface = $('.mdc-dialog__surface.is-processing');
                            $modalBtn.prop('disabled', false);
                            $modalSurface.removeClass('is-processing');
                        }
                    },
                }
            });
        })();
	</script>
</th:block>


</html>
